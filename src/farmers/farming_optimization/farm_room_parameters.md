
<h1> Air Conditioner, Relative Humidity and Air Changes per Hour </h1>

<h1> Table of Contents </h2>

- [Introduction](#introduction)
- [Calculate the Minimum BTU/h Needed for the AC](#calculate-the-minimum-btuh-needed-for-the-ac)
  - [How Much BTU/h is Needed?](#how-much-btuh-is-needed)
  - [Taking Utilization Into Account](#taking-utilization-into-account)
  - [The General BTU/h Equation](#the-general-btuh-equation)
- [Ensure Proper Relative Humidity](#ensure-proper-relative-humidity)
- [Ensure Proper Air Changes per Hour](#ensure-proper-air-changes-per-hour)

***

## Introduction

In this section of the ThreeFold Farmers book, we cover some important notions concerning the room parameters where your 3Nodes are working. We discuss topics such as air conditioner, relative humidity and air changes per hour.

Planning ahead the building of your ThreeFold farm with these notions in mind will ensure a smooth farming experience.



## Calculate the Minimum BTU/h Needed for the AC

Let's see how to calculate how powerful your AC unit needs to be when it comes to cooling down your server room.

As we know, servers generate heat when they are working. While a desktop 3Node will generate under 20W at idle and a server 3Node might use 100W at **idle**, when you pile up some 3Nodes desktops/servers in the same location, things can get pretty warm when cultivation on the Grid is happening. Indeed, when your servers will be using a lot of power, especially in the summer time, you might need some additional cooling.

A good thing about servers generating heat is that this can be used as a **heat source in the winter**. Other more advanced techniques can be used to maximize the heat production. But that's for another day! 

Note that for small farms, your current heating and cooling system may suffice.

So let's do the calculation:

### How Much BTU/h is Needed?


How much BTU/h does your ThreeFold Farm need to cool your servers?

Calculating this is pretty simple actually. You need to keep in mind that **1 kW (1000 W) of power is equivalent to 3413 BTU/h** (Britisth Thermal Unit). 

> 1000 W = 1 kW = 3413 BTU/h
>
> 1000 Wh = 1 kWh = 3413 BTU

So with our idle server example running at 100W, we have 0.1 kW.

> 100 W = 0.1 kW

We then multiply our kW by the BTU/h factor **3413** to obtain the result in BTU/h. Here we have 341.3 BTU/h:

> 0.1 kW * 3413 = 341.3 BTU/h

Say you have 5 servers with this same configuration. It means you have 

> (# of servers) * (BTU/h per server) = Total BTU/h
 
> 5 * 341.3 =  1706.5 BTU/h

Thus, a 2000 BTU/h air conditioner would be able to compensate for the heat when your servers are at idle. 

> Note that in general for air conditioners, it will often be written BTU instead of BTU/h as a shorthand.


Please take note that this does not take into account the energy needed to cool down your environment. You'd need to take into consideration **the heat of the servers and the general heat of your environment** to figure out how much BTU your AC needs in the big heat days of the summer.

### Taking Utilization Into Account

But then, what happens at cultivation? Well, say your server needs 400W of power when it's being fully cultivated by some lively ThreeFold Users of the New Internet. In this case, we would say that 400 W is the power consumption at **full load**.

As we started with 100 W, and we now have 400 W, it means that you'd need four times the amount of BTU/h. 

Here we show how to calculate this with any other configuration of full load/idle. 

> Full-load / Idle Ratio =  Full Load W / Idle W

> 4 = 400 W / 100 W

The BTU/h needed in cultivation would be 

> (Full-Load / Idle Ratio) * Idle BTU/h needed = Full Load BTU/h 

> 4 * (1706.5 BTU/h at Idle) = 6826 BTU/h at Full Load

Thus, you would need 6826 BTU/h from the AC unit for 5 servers running each at 400W. In that case, a 8000 BTU/h AC unit would be sufficient. Let's say your environment would typically need 4000 BTU/h to cool the room, you'd need about 12000 BTU/h AC unit for the whole setup. 

> If: BTU/h needed < BTU/h AC Unit, Then: AC Unit is OK for TF farming at full load.



Now you can have a better idea of how much BTU/h is necessary for your AC unit. Of course, this can be a useful piece of data to incorporate in your simulation of Revenue/Cost farming.

### The General BTU/h Equation

The **general equation** would then be:

> Server Power in kW at Full Load * 3413 * Number of Servers = Total Maximum BTU/h needed per ThreeFold Farm



As another example, 7 servers using 120 W of power at idle would need:

> 0.12 * 3413 * 7 = 2866.92 BTU/h

During cultivation, these 7 servers might use 480 W. This would be:

> 0.48 * 3413 * 7 = 11467.68 BTU/h

To be sure everything's OK, this set up would need a 12 000 BTU/h AC unit to compensate for the heat generated by the ThreeFold Farm during full cultivation. This example considers the environment heat to be negligible.

> 11467.68 < 12000 --> 12K BTU/h AC Unit is OK for farm


That's it! It ain't any more complicated. Straight up mathematics and some judgment.

Now, let's compute the costs of running all this!



## Ensure Proper Relative Humidity

To ensure that the relative humidity in your server room stays within a proper range, look in your server's user manual to know the proper range of relative humidity your server can handle. If necessary, use an hygrometer to measure relative humidity and make sure it stays within an acceptable range for your 3Nodes.

Depending on your geographical location and your current situation, it could be interesting to consider having a AC unit equipped with a dehumidifier. Read your servers' manual to check the proper relative humidity range and set the unit accordingly. The maximum/minimum temperature and relative humidity a 3Node server can handle will depend on the specific server/computer you are using. You should check the server's technical guide/manual to get the proper information. The following is an example.

We will use here the Dell R720 as an example since it is a popular 3Node choice. In this case, we use the R720's [Technical Guide](https://downloads.dell.com/manuals/all-products/esuprt_ser_stor_net/esuprt_poweredge/poweredge-r720_reference-guide_en-us.pdf) as reference.

For the R720, between 35˚C and 40˚C (or 95˚F and 104˚F), with 5% to 85% relative humidity, you can have this <10% of annual operating hours (around 36 days per year), and between 40˚C and 45˚C (or 104˚F and 113˚F), with 5 to 90% relative humidity, it’s <1% of annual operating hours (around 3.6 day per year). All this considers that there is no direct sunlight.

From 10˚C to 35˚C (thus from 50˚F to 95˚F), it’s considered standard operating temperature. With relative humidity from 10% to 80%.

This can give you a good idea of the conditions a 3Node can handle, but make sure you verify with your specific server's manual.

## Ensure Proper Air Changes per Hour

To ensure that the air changes per hour is optimal in your 3Node servers' room, and depending on your current situation, it can be recommended to ventilate the server room in other to disperse or evacuate excess heat and humidity. In those cases, ventilation flow will be set depending on the air changes per hour (ACPH) needed. Note that the [ASHRAE](https://www.ashrae.org/File%20Library/Technical%20Resources/Standards%20and%20Guidelines/Standards%20Addenda/62-2001/62-2001_Addendum-n.pdf) recommends from 10 to 15 ACPH for a computer room.

> Note: A good AC unit will be able to regulate the heat and the relative humidity as well as ensure proper air changes per hour.